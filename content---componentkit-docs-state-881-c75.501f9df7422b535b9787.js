(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{113:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",function(){return s}),t.d(a,"rightToc",function(){return p}),t.d(a,"default",function(){return u});t(0);var n=t(133);t(134);function c(){return(c=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function o(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}var s={title:"State"},p=[],r={rightToc:p},m="wrapper";function u(e){var a=e.components,t=o(e,["components"]);return Object(n.a)(m,c({},r,t,{components:a,mdxType:"MDXLayout"}),Object(n.a)("p",null,"So far we've been loosely inspired by ",Object(n.a)("a",c({parentName:"p"},{href:"http://facebook.github.io/react/"}),"React"),". If you're familiar with React, you'll know that React components have two elements:"),Object(n.a)("ul",null,Object(n.a)("li",{parentName:"ul"},Object(n.a)("strong",{parentName:"li"},"props"),": passed from the parent. These roughly correspond to our parameters passed to the ",Object(n.a)("inlineCode",{parentName:"li"},"+new")," method."),Object(n.a)("li",{parentName:"ul"},Object(n.a)("strong",{parentName:"li"},"state"),': internal to the component, this holds implementation details that the parent should not have to know about. The canonical example is whether some text should be rendered fully, or truncated with a "Continue Reading…" link. This is a detail the parent component should not have to manually manage.')),Object(n.a)("p",null,"Figuring out the difference between these two can be tricky at first. ",Object(n.a)("a",c({parentName:"p"},{href:"http://facebook.github.io/react/blog/2013/11/05/thinking-in-react.html"}),"Thinking in React")," is a really helpful blog post on this topic."),Object(n.a)("p",null,"Just like React, ",Object(n.a)("inlineCode",{parentName:"p"},"CKComponent")," has state."),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@interface")," CKComponent\n",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"-")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"void"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"updateState",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token function"}),"id")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"^"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"updateBlock mode",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"CKUpdateMode",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"mode",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@end"),"\n")),Object(n.a)("p",null,'Let\'s make a simple example of using state for the "Continue Reading…" link.'),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),Object(n.a)("span",c({parentName:"code"},{className:"token macro property"}),"#",Object(n.a)("span",c({parentName:"span"},{className:"token directive keyword"}),"import"),' "CKComponentSubclass.h" '),Object(n.a)("span",c({parentName:"code"},{className:"token comment"}),"// import to expose updateState:"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@implementation")," MessageComponent\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"+")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"initialState\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"@"),"NO",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"+")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"instancetype",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"newWithMessage",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"NSAttributedString ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"*"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"message\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  CKComponentScope ",Object(n.a)("span",c({parentName:"code"},{className:"token function"}),"scope"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"self"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n  NSNumber ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"*"),"state ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"=")," scope",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token function"}),"state"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"super")," newWithComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"\n          ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"CKTextComponent\n           newWithAttributes",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n             ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),"attributedString ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"=")," message",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n             ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),"maximumNumberOfLines ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"state boolValue",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"?")," ",Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"5"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n           ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n           viewAttributes",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n           accessibilityContext",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"-")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"void"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"didTapContinueReading\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"self")," updateState",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"^"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"id oldState",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"@"),"YES",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}")," mode",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"CKUpdateModeAsynchronous",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@end"),"\n")),Object(n.a)("p",null,"That's all there is to it. Some nice attributes:"),Object(n.a)("ul",null,Object(n.a)("li",{parentName:"ul"},"Continue Reading state is completely hidden from parent components and controllers. They don't need to know about it or manage it."),Object(n.a)("li",{parentName:"ul"},"State changes can be coalesced or arbitrarily delayed for performance reasons. We can easily compute the updated component off the main thread when possible/desired.")))}u.isMDXComponent=!0}}]);