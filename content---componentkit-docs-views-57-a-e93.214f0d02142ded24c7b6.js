(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{121:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",function(){return s}),n.d(t,"rightToc",function(){return r}),n.d(t,"default",function(){return p});n(0);var a=n(127);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s={id:"views",title:"Views"},r=[{value:"Primitive Arguments",id:"primitive-arguments",children:[]},{value:"Viewless Components",id:"viewless-components",children:[]},{value:"Advanced Views",id:"advanced-views",children:[]}],l={rightToc:r},c="wrapper";function p(e){var t=e.components,n=o(e,["components"]);return Object(a.b)(c,i({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Create components using the ",Object(a.b)("inlineCode",{parentName:"p"},"newWithView:size:")," class method:"),Object(a.b)("pre",null,Object(a.b)("code",i({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),"+ (instancetype)newWithView:(const CKComponentViewConfiguration &)view\n                       size:(const CKComponentSize &)size;\n")),Object(a.b)("p",null,"It's important to note that you don't pass a ",Object(a.b)("inlineCode",{parentName:"p"},"UIView")," directly, but a ",Object(a.b)("inlineCode",{parentName:"p"},"CKComponentViewConfiguration"),". What's that?"),Object(a.b)("pre",null,Object(a.b)("code",i({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),"struct CKComponentViewConfiguration {\n  CKComponentViewClass viewClass;\n  std::unordered_map<CKComponentViewAttribute, id> attributes;\n};\n")),Object(a.b)("p",null,"The first field is a view class. Ignore ",Object(a.b)("inlineCode",{parentName:"p"},"CKComponentViewClass")," for now — in most cases you just pass a class like ",Object(a.b)("inlineCode",{parentName:"p"},"[UIImageView class]")," or ",Object(a.b)("inlineCode",{parentName:"p"},"[UIButton class]"),"."),Object(a.b)("p",null,"The second field holds a map of attributes to values: font, color, background image, and so forth. Again, ignore ",Object(a.b)("inlineCode",{parentName:"p"},"CKComponentViewAttribute")," for now; you can usually use a ",Object(a.b)("inlineCode",{parentName:"p"},"SEL")," as the attribute."),Object(a.b)("p",null,"Let's put one together:"),Object(a.b)("pre",null,Object(a.b)("code",i({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),"[CKComponent \n newWithView:{\n   [UIImageView class],\n   {\n     {@selector(setImage:), image},\n     {@selector(setContentMode:), @(UIViewContentModeCenter)} // Wrapping into an NSNumber\n   }\n }\n size:{image.size.width, image.size.height}];\n")),Object(a.b)("p",null,"That's all there is to it. ComponentKit does this for us:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Automatically creates or reuses a ",Object(a.b)("inlineCode",{parentName:"li"},"UIImageView")," when the component is mounted"),Object(a.b)("li",{parentName:"ul"},"Automatically calls ",Object(a.b)("inlineCode",{parentName:"li"},"setImage:")," and ",Object(a.b)("inlineCode",{parentName:"li"},"setContentMode:")," with the given values"),Object(a.b)("li",{parentName:"ul"},"Skips calling ",Object(a.b)("inlineCode",{parentName:"li"},"setImage:")," or ",Object(a.b)("inlineCode",{parentName:"li"},"setContentMode:")," if the value is unchanged between two updates — the most common case when updating a tree.")),Object(a.b)("h2",null,Object(a.b)("a",i({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"primitive-arguments"})),Object(a.b)("a",i({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#primitive-arguments"}),"#"),"Primitive Arguments"),Object(a.b)("p",null,"The values in the map are of type ",Object(a.b)("inlineCode",{parentName:"p"},"id"),", so if you want to pass in primitive types like ",Object(a.b)("inlineCode",{parentName:"p"},"BOOL"),", you have to wrap them into an ",Object(a.b)("inlineCode",{parentName:"p"},"NSValue")," object using e.g. ",Object(a.b)("inlineCode",{parentName:"p"},"@(value)")," and ComponentKit will unwrap them."),Object(a.b)("h2",null,Object(a.b)("a",i({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"viewless-components"})),Object(a.b)("a",i({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#viewless-components"}),"#"),"Viewless Components"),Object(a.b)("p",null,"Often there exist logical components that don't need a corresponding view in the view hierarchy. For example a ",Object(a.b)("inlineCode",{parentName:"p"},"CKStackLayoutComponent")," often doesn't need to have a view; it only needs to position various subviews inside a designated area. In such situations, just pass ",Object(a.b)("inlineCode",{parentName:"p"},"{}")," for the view configuration and no view is created. For example:"),Object(a.b)("pre",null,Object(a.b)("code",i({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),"[CKComponent newWithView:{} size:{}]\n")),Object(a.b)("p",null,"(You can also just use ",Object(a.b)("inlineCode",{parentName:"p"},"+new")," directly, which uses this as the default.)"),Object(a.b)("h2",null,Object(a.b)("a",i({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"advanced-views"})),Object(a.b)("a",i({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#advanced-views"}),"#"),"Advanced Views"),Object(a.b)("p",null,"This is sufficient for most cases, but there is considerably more power when you need it. See ",Object(a.b)("a",i({parentName:"p"},{href:"advanced-views.html"}),"Advanced Views")," if you want to learn more."))}p.isMDXComponent=!0}}]);