(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{75:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",function(){return s}),t.d(a,"rightToc",function(){return p}),t.d(a,"default",function(){return l});t(0);var n=t(133);t(134);function c(){return(c=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function o(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}var s={title:"Components Can't Be Delegates Directly",id:"components-cant-be-delegates"},p=[],r={rightToc:p},m="wrapper";function l(e){var a=e.components,t=o(e,["components"]);return Object(n.a)(m,c({},r,t,{components:a,mdxType:"MDXLayout"}),Object(n.a)("p",null,"TL;DR: You can use ",Object(n.a)("inlineCode",{parentName:"p"},"CKComponentDelegateAttribute")," to configure a delegate for a view to proxy delegate methods back to your component."),Object(n.a)("p",null,"Components are ",Object(n.a)("strong",{parentName:"p"},"short-lived"),", and their lifecycle is not under your control. Thus they should not be delegates or ",Object(n.a)("inlineCode",{parentName:"p"},"NSNotification")," observers."),Object(n.a)("p",null,"An example: imagine you're showing a ",Object(n.a)("inlineCode",{parentName:"p"},"UIAlertView"),". You might be tempted to make the component the delegate:"),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"redhighlight",redhighlight:!0}),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@implementation")," AlertDisplayComponent ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"<"),"UIAlertViewDelegate",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),">"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  UIAlertView ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"*"),"_alertView",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"-")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"void"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"didTapDisplayAlert\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  _alertView ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"UIAlertView alloc",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]")," initWithTitle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token string"}),'@"Are you sure?"'),"\n                                          message",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"nil\n                                         delegate",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"self")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"_alertView show",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"-")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"void"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"alertView",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"UIAlertView ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"*"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"alert didDismissWithButtonIndex",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"NSInteger",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"buttonIndex\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"self")," updateState",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@end"),"\n")),Object(n.a)("p",null,"But if the component hierarchy is regenerated for any reason, the original component will deallocate and the alert view will be left with no delegate."),Object(n.a)("p",null,"Instead, use ",Object(n.a)("inlineCode",{parentName:"p"},"CKComponentController"),". Component controllers are long-lived; they persist and keep track of each updated version of your component. You can ",Object(n.a)("a",c({parentName:"p"},{href:"component-controllers.html"}),"learn more about component controllers"),"; here's an example of their use:"),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@interface")," AlertDisplayComponentController ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":")," CKComponentController ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"<"),"UIAlertViewDelegate",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),">"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@end"),"\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@implementation")," AlertDisplayComponentController\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  UIAlertView ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"*"),"_alertView",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"-")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"void"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"didTapDisplayAlert\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  _alertView ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"UIAlertView alloc",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]")," initWithTitle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token string"}),'@"Are you sure?"'),"\n                                          message",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"nil\n                                         delegate",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"self")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"_alertView show",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"-")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"void"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"alertView",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"UIAlertView ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"*"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"alert didDismissWithButtonIndex",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"NSInteger",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"buttonIndex\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"self"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),"component updateState",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@end"),"\n")),Object(n.a)("p",null,"Your other option is to use ",Object(n.a)("inlineCode",{parentName:"p"},"CKComponentDelegateAttribute"),", which will proxy delegate callbacks into the component responder chain."),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"CKComponent\n newWithView",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"UIScrollView class",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n   ",Object(n.a)("span",c({parentName:"code"},{className:"token function"}),"CKComponentDelegateAttribute"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@selector"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"setDelegate",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n   ",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@selector"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"scrollViewDidScroll",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n   ",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"@selector"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"scrollViewDidZoom",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n   ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"\n ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n size",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),"\n")),Object(n.a)("p",null," Then in your component, you can implement the delegate methods ",Object(n.a)("inlineCode",{parentName:"p"},"-scrollViewDidScroll:")," and ",Object(n.a)("inlineCode",{parentName:"p"},"-scrollViewDidZoom:"),"."))}l.isMDXComponent=!0}}]);