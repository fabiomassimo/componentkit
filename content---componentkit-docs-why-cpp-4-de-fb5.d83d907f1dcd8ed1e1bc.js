(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{121:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",function(){return s}),t.d(a,"rightToc",function(){return p}),t.d(a,"default",function(){return r});t(0);var n=t(133);t(134);function c(){return(c=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function o(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}var s={title:"Why C++",id:"why-cpp"},p=[{value:"Aggregate Initialization",id:"aggregate-initialization",children:[]},{value:"Type Safety",id:"type-safety",children:[]},{value:"Efficiency",id:"efficiency",children:[]},{value:"Nil Safety",id:"nil-safety",children:[]}],i={rightToc:p},m="wrapper";function r(e){var a=e.components,t=o(e,["components"]);return Object(n.a)(m,c({},i,t,{components:a,mdxType:"MDXLayout"}),Object(n.a)("p",null,"Using Objective-C++ in ComponentKit offers some serious wins in syntax. However this does mean you need to touch a limited subset of C++ to work with ComponentKit.  Don't worry, it's not too bad!"),Object(n.a)("p",null,"Here again is a generic article component:"),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"CKStackLayoutComponent\n newWithStyle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"."),"direction ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"=")," CKStackLayoutComponentDirectionVertical",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n children",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n   ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"HeaderComponent newWithArticle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"article",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n   ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"MessageComponent newWithArticle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"article",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n   ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"FooterComponent newWithArticle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"article",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n")),Object(n.a)("p",null,"Here's what it might look like in pure Objective-C:"),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"redhighlight",redhighlight:!0}),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"CKStackLayoutComponent newWithStyle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"CKStackLayoutComponentStyle alloc",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]")," initWithDirection",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"CKStackLayoutComponentDirectionVertical\n                                                                             justifyContent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"CKStackLayoutComponentJustifyContentStart\n                                                                                 alignItems",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"CKStackLayoutComponentAlignItemsStart\n                                                                                    spacing",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),"\n                            children",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"@"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"CKStackLayoutComponentChild childWithComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"HeaderComponent newWithArticle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"article",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),"\n                                       topPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),"\n                                      leftPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),"\n                                    bottomPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"CKStackLayoutComponentChild childWithComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"MessageComponent newWithArticle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"article",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),"\n                                       topPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),"\n                                      leftPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),"\n                                    bottomPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"CKStackLayoutComponentChild childWithComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"FooterComponent newWithArticle",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"article",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),"\n                                       topPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),"\n                                      leftPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),"\n                                    bottomPadding",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token number"}),"0"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n")),Object(n.a)("h2",null,Object(n.a)("a",c({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"aggregate-initialization"})),Object(n.a)("a",c({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#aggregate-initialization"}),"#"),"Aggregate Initialization"),Object(n.a)("p",null,"C and C++ have ",Object(n.a)("a",c({parentName:"p"},{href:"http://en.cppreference.com/w/cpp/language/aggregate_initialization"}),"aggregate initialization"),", which allows initializing a struct with very terse syntax. We need Objective-C++ to take advantage of this syntax because, unlike Objective-C, Objective-C++ allows putting Objective-C objects in structs when ARC is enabled."),Object(n.a)("p",null,"You can be as expressive as you like; you can use ",Object(n.a)("inlineCode",{parentName:"p"},"{ .name = value, ... }")," or just ",Object(n.a)("inlineCode",{parentName:"p"},"{ value1, value2, ... }"),". (The latter form is shorter, but fragile to argument reordering and sometimes harder to read.) Note that you can easily omit fields; in the C++ example above, the padding-related values are omitted and default to 0."),Object(n.a)("h2",null,Object(n.a)("a",c({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"type-safety"})),Object(n.a)("a",c({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#type-safety"}),"#"),"Type Safety"),Object(n.a)("p",null,"In the previous example the C++ would fail to compile if we inserted a child of the wrong type, while the Objective-C example compiles with any type in the arrayâ€”even an ",Object(n.a)("inlineCode",{parentName:"p"},"NSString *"),"."),Object(n.a)("h2",null,Object(n.a)("a",c({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"efficiency"})),Object(n.a)("a",c({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#efficiency"}),"#"),"Efficiency"),Object(n.a)("p",null,"Being fully declarative and immutable means you use a ",Object(n.a)("em",{parentName:"p"},"lot")," of objects. C++ objects are far more efficient to create because they can be stack-allocated, ",Object(n.a)("a",c({parentName:"p"},{href:"http://stackoverflow.com/questions/4303513/push-back-vs-emplace-back"}),"emplaced"),", ",Object(n.a)("a",c({parentName:"p"},{href:"http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html"}),"moved"),", etc."),Object(n.a)("h2",null,Object(n.a)("a",c({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"nil-safety"})),Object(n.a)("a",c({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#nil-safety"}),"#"),"Nil Safety"),Object(n.a)("p",null,"Objective-C containers throw if you insert ",Object(n.a)("inlineCode",{parentName:"p"},"nil")," elements in them but C++ containers do not. Relaxing this constraint makes it convenient to write hierarchies where any individual child may be nil:"),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"highlight",highlight:!0}),"  children",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n    headerComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n    messageComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n    attachmentComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),","),"\n    footerComponent\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(n.a)("p",null,"The alternative would be a bunch of conditionals in Objective-C:"),Object(n.a)("pre",{className:"language-objectivec"},Object(n.a)("code",c({parentName:"pre"},{className:"language-objectivec",metastring:"redhighlight",redhighlight:!0}),"NSMutableArray ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"*"),"children ",Object(n.a)("span",c({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"NSMutableArray array",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"headerComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"children addObject",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"headerComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"messageComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"children addObject",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"messageComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"attachmentComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"children addObject",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"attachmentComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"footerComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"["),"children addObject",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),":"),"footerComponent",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.a)("span",c({parentName:"code"},{className:"token punctuation"}),"}"),"\n")))}r.isMDXComponent=!0}}]);