<!DOCTYPE html>
<html lang=&#34;en&#34; data-theme=&#34;&#34;>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/componentkit/main.9b8caa244fc614ef5c5c.css","/componentkit/main.9b8caa244fc614ef5c5c.js"],"component---mnt-btrfs-trunk-hg-fbobjc-fbsource-56956024-1560963365-fbobjc-vendor-lib-component-kit-public-website-pages-index-jsd-01-f82":["/componentkit/component---mnt-btrfs-trunk-hg-fbobjc-fbsource-56956024-1560963365-fbobjc-vendor-lib-component-kit-public-website-pages-index-jsd-01-f82.9a73067f6e6848663820.css","/componentkit/component---mnt-btrfs-trunk-hg-fbobjc-fbsource-56956024-1560963365-fbobjc-vendor-lib-component-kit-public-website-pages-index-jsd-01-f82.9a73067f6e6848663820.js"],"metadata---componentkit-79-c-e10":["/componentkit/metadata---componentkit-79-c-e10.900655b59bc6af533c1d.js"],"component---mnt-btrfs-trunk-hg-fbobjc-fbsource-56956024-1560963365-fbobjc-vendor-lib-component-kit-public-website-pages-support-jsa-67-1b4":["/componentkit/component---mnt-btrfs-trunk-hg-fbobjc-fbsource-56956024-1560963365-fbobjc-vendor-lib-component-kit-public-website-pages-support-jsa-67-1b4.037ead21e3a432f21dd9.js"],"metadata---componentkit-support-33-f-f18":["/componentkit/metadata---componentkit-support-33-f-f18.b704f2466c35e57050c4.js"],"component---theme-doc-page-1-be-9be":["/componentkit/component---theme-doc-page-1-be-9be.af01764900ac30f94ad4.css","/componentkit/component---theme-doc-page-1-be-9be.af01764900ac30f94ad4.js"],"docsMetadata---componentkit-docs-3-a-2-70c":["/componentkit/docsMetadata---componentkit-docs-3-a-2-70c.4281021fd793e785377b.js"],"component---theme-doc-item-178-a40":[],"content---componentkit-docs-actionsfab-d0f":["/componentkit/content---componentkit-docs-actionsfab-d0f.3907c360adc5dd8a0d60.js"],"metadata---componentkit-docs-actionse-09-fcd":["/componentkit/metadata---componentkit-docs-actionse-09-fcd.6ffe60533f06e2c90344.js"],"content---componentkit-docs-advanced-viewsaca-2cd":["/componentkit/content---componentkit-docs-advanced-viewsaca-2cd.99885586a8ec6d6712ff.js"],"metadata---componentkit-docs-advanced-views-075-035":["/componentkit/metadata---componentkit-docs-advanced-views-075-035.05d36e13c12d67d6bcc3.js"],"content---componentkit-docs-avoid-excessive-branchinga-6-f-163":["/componentkit/content---componentkit-docs-avoid-excessive-branchinga-6-f-163.ff8aea9acdc6dd5a9885.js"],"metadata---componentkit-docs-avoid-excessive-branching-729-712":["/componentkit/metadata---componentkit-docs-avoid-excessive-branching-729-712.311a5ad87677a733e2d7.js"],"content---componentkit-docs-avoid-local-variables-648-679":["/componentkit/content---componentkit-docs-avoid-local-variables-648-679.a9e3920c6bc53d6dc7af.js"],"metadata---componentkit-docs-avoid-local-variablesae-1-600":["/componentkit/metadata---componentkit-docs-avoid-local-variablesae-1-600.245955d0ca21091cc9d8.js"],"content---componentkit-docs-avoid-overridesf-3-f-140":["/componentkit/content---componentkit-docs-avoid-overridesf-3-f-140.9758abb20781c06de9fd.js"],"metadata---componentkit-docs-avoid-overridesb-09-f5a":["/componentkit/metadata---componentkit-docs-avoid-overridesb-09-f5a.338ad8166fb53bf7e791.js"],"content---componentkit-docs-avoid-push-back-0-da-f6f":["/componentkit/content---componentkit-docs-avoid-push-back-0-da-f6f.0650ccbd534719d9f821.js"],"metadata---componentkit-docs-avoid-push-backe-07-90d":["/componentkit/metadata---componentkit-docs-avoid-push-backe-07-90d.6f48003a7cbd0949547f.js"],"content---componentkit-docs-avoid-single-use-constants-41-c-5bb":["/componentkit/content---componentkit-docs-avoid-single-use-constants-41-c-5bb.b5c3174ccbbdf292b4cd.js"],"metadata---componentkit-docs-avoid-single-use-constants-070-2e3":["/componentkit/metadata---componentkit-docs-avoid-single-use-constants-070-2e3.57ff58fdf3fbab432ed9.js"],"content---componentkit-docs-avoid-width-100-percentaff-e53":["/componentkit/content---componentkit-docs-avoid-width-100-percentaff-e53.e9de43b6934ac4acc844.js"],"metadata---componentkit-docs-avoid-width-100-percentea-9-c34":["/componentkit/metadata---componentkit-docs-avoid-width-100-percentea-9-c34.db9a7e973fe8c141eb50.js"],"content---componentkit-docs-break-out-compositese-44-0fe":["/componentkit/content---componentkit-docs-break-out-compositese-44-0fe.deb356f4e92773b84cd2.js"],"metadata---componentkit-docs-break-out-compositesff-4-ca6":["/componentkit/metadata---componentkit-docs-break-out-compositesff-4-ca6.45e0ea8e72233a17134a.js"],"content---componentkit-docs-check-for-nil-511-72e":["/componentkit/content---componentkit-docs-check-for-nil-511-72e.b09e51bc575731de2244.js"],"metadata---componentkit-docs-check-for-nil-5-e-0-856":["/componentkit/metadata---componentkit-docs-check-for-nil-5-e-0-856.a48559dea276e7311d42.js"],"content---componentkit-docs-component-apidfd-88a":["/componentkit/content---componentkit-docs-component-apidfd-88a.3edb12304e56552b4256.js"],"metadata---componentkit-docs-component-apid-58-aa2":["/componentkit/metadata---componentkit-docs-component-apid-58-aa2.e74fb45959cc0b7cee93.js"],"content---componentkit-docs-component-controllers-54-a-e7a":["/componentkit/content---componentkit-docs-component-controllers-54-a-e7a.15be7280ba858d944e0e.js"],"metadata---componentkit-docs-component-controllersce-2-cc7":["/componentkit/metadata---componentkit-docs-component-controllersce-2-cc7.a57220238eb4829b9eec.js"],"content---componentkit-docs-component-hosting-view-79-d-848":["/componentkit/content---componentkit-docs-component-hosting-view-79-d-848.d58ce01d53d4f33a2b15.js"],"metadata---componentkit-docs-component-hosting-view-5-dc-55d":["/componentkit/metadata---componentkit-docs-component-hosting-view-5-dc-55d.6c785a8adbed67f2ab03.js"],"content---componentkit-docs-components-cant-be-delegates-85-d-81d":["/componentkit/content---componentkit-docs-components-cant-be-delegates-85-d-81d.fee59ed1e4073708fe44.js"],"metadata---componentkit-docs-components-cant-be-delegatesbc-9-ba2":["/componentkit/metadata---componentkit-docs-components-cant-be-delegatesbc-9-ba2.ea4a068fb9050604468d.js"],"content---componentkit-docs-composite-componentsae-8-64b":["/componentkit/content---componentkit-docs-composite-componentsae-8-64b.d6b828c4ff5aa1544535.js"],"metadata---componentkit-docs-composite-componentsebb-c6f":["/componentkit/metadata---componentkit-docs-composite-componentsebb-c6f.8c90013dd7e9f1261194.js"],"content---componentkit-docs-datasource-basics-73-a-54c":["/componentkit/content---componentkit-docs-datasource-basics-73-a-54c.4b2a5918aa221fb1ca19.js"],"metadata---componentkit-docs-datasource-basics-132-b80":["/componentkit/metadata---componentkit-docs-datasource-basics-132-b80.09b82bebad598a7714f3.js"],"content---componentkit-docs-datasource-changeset-api-609-e50":["/componentkit/content---componentkit-docs-datasource-changeset-api-609-e50.22e44caca376bd9ec868.js"],"metadata---componentkit-docs-datasource-changeset-api-64-c-b70":["/componentkit/metadata---componentkit-docs-datasource-changeset-api-64-c-b70.e96dc6410e1596eb2ca1.js"],"content---componentkit-docs-datasource-gotchas-10-e-3cd":["/componentkit/content---componentkit-docs-datasource-gotchas-10-e-3cd.4ab72c7021d0a320df65.js"],"metadata---componentkit-docs-datasource-gotchas-389-b3f":["/componentkit/metadata---componentkit-docs-datasource-gotchas-389-b3f.774957a05bdf1b5da408.js"],"content---componentkit-docs-datasource-overview-031-b7b":["/componentkit/content---componentkit-docs-datasource-overview-031-b7b.c701b339caa26c4d87cb.js"],"metadata---componentkit-docs-datasource-overviewda-9-0e1":["/componentkit/metadata---componentkit-docs-datasource-overviewda-9-0e1.5e756a759009b4828ae8.js"],"content---componentkit-docs-debuggingea-2-4dc":["/componentkit/content---componentkit-docs-debuggingea-2-4dc.f07b4b3f0a2e8bc03c74.js"],"metadata---componentkit-docs-debuggingcec-b75":["/componentkit/metadata---componentkit-docs-debuggingcec-b75.e05b9117edca4e6d0357.js"],"content---componentkit-docs-getting-started-88-e-5ee":["/componentkit/content---componentkit-docs-getting-started-88-e-5ee.cff3b32528ae4f538b5a.js"],"metadata---componentkit-docs-getting-started-28-f-daa":["/componentkit/metadata---componentkit-docs-getting-started-28-f-daa.4c34a05e960c9de46da7.js"],"content---componentkit-docs-indentationda-9-241":["/componentkit/content---componentkit-docs-indentationda-9-241.09b1fce2c6e3b2b87b56.js"],"metadata---componentkit-docs-indentation-598-be2":["/componentkit/metadata---componentkit-docs-indentation-598-be2.30817e3c8c7366a46a88.js"],"content---componentkit-docs-keep-controller-in-component-8-e-3-d15":["/componentkit/content---componentkit-docs-keep-controller-in-component-8-e-3-d15.45fc916c1042b2c1c575.js"],"metadata---componentkit-docs-keep-controller-in-component-465-84b":["/componentkit/metadata---componentkit-docs-keep-controller-in-component-465-84b.80f459aeae9976215d70.js"],"content---componentkit-docs-layout-206-2c6":["/componentkit/content---componentkit-docs-layout-206-2c6.b6abac4fa3430d6cf0b7.js"],"metadata---componentkit-docs-layoutdb-9-19f":["/componentkit/metadata---componentkit-docs-layoutdb-9-19f.0a61692d6cceed13a91c.js"],"content---componentkit-docs-lifecycle-methodsa-85-8d2":["/componentkit/content---componentkit-docs-lifecycle-methodsa-85-8d2.564dcdb614c4d0ce1f15.js"],"metadata---componentkit-docs-lifecycle-methodsb-62-bb0":["/componentkit/metadata---componentkit-docs-lifecycle-methodsb-62-bb0.d48165c055d1899e07bb.js"],"content---componentkit-docs-never-subclass-components-372-47f":["/componentkit/content---componentkit-docs-never-subclass-components-372-47f.5f84e2c7094d99bba2df.js"],"metadata---componentkit-docs-never-subclass-componentse-00-267":["/componentkit/metadata---componentkit-docs-never-subclass-componentse-00-267.5bb9f676ad9319028c55.js"],"content---componentkit-docs-no-side-effects-4-cb-0bf":["/componentkit/content---componentkit-docs-no-side-effects-4-cb-0bf.4fd76fa4156ad1322389.js"],"metadata---componentkit-docs-no-side-effects-1-cd-a4f":["/componentkit/metadata---componentkit-docs-no-side-effects-1-cd-a4f.e7416e2a8c6f2c214f52.js"],"content---componentkit-docs-no-underscoresc-7-f-d8a":["/componentkit/content---componentkit-docs-no-underscoresc-7-f-d8a.70771e4a4d05f494ed11.js"],"metadata---componentkit-docs-no-underscores-0-fa-3c0":["/componentkit/metadata---componentkit-docs-no-underscores-0-fa-3c0.89e4205a0f872125e5e6.js"],"content---componentkit-docs-pass-in-actions-034-b64":["/componentkit/content---componentkit-docs-pass-in-actions-034-b64.60e25be4f040f96edc37.js"],"metadata---componentkit-docs-pass-in-actionsb-7-c-605":["/componentkit/metadata---componentkit-docs-pass-in-actionsb-7-c-605.cca82c8a1189f036eb27.js"],"content---componentkit-docs-pass-in-immutable-objects-170-281":["/componentkit/content---componentkit-docs-pass-in-immutable-objects-170-281.1517ea734a0f23e88066.js"],"metadata---componentkit-docs-pass-in-immutable-objects-091-3ca":["/componentkit/metadata---componentkit-docs-pass-in-immutable-objects-091-3ca.ed5842fdb6640487813c.js"],"content---componentkit-docs-philosophy-0-dd-06e":["/componentkit/content---componentkit-docs-philosophy-0-dd-06e.a5d27746a7479891fcc2.js"],"metadata---componentkit-docs-philosophy-4-e-7-92f":["/componentkit/metadata---componentkit-docs-philosophy-4-e-7-92f.866a31126eb45aa60fae.js"],"content---componentkit-docs-responder-chaina-82-abc":["/componentkit/content---componentkit-docs-responder-chaina-82-abc.92963c6502b0e3308d50.js"],"metadata---componentkit-docs-responder-chain-2-cc-95d":["/componentkit/metadata---componentkit-docs-responder-chain-2-cc-95d.9a73dce1dbcb4766d6b4.js"],"content---componentkit-docs-scopes-4-e-1-141":["/componentkit/content---componentkit-docs-scopes-4-e-1-141.92da4190264fd78a37e4.js"],"metadata---componentkit-docs-scopescf-2-100":["/componentkit/metadata---componentkit-docs-scopescf-2-100.7525e52c0cc96b25865a.js"],"content---componentkit-docs-state-65-e-609":["/componentkit/content---componentkit-docs-state-65-e-609.8b8b3a3430e6c9ff46b7.js"],"metadata---componentkit-docs-statec-82-7ff":["/componentkit/metadata---componentkit-docs-statec-82-7ff.33b8475ecc20b96b91e1.js"],"content---componentkit-docs-under-300-linesdde-e5f":["/componentkit/content---componentkit-docs-under-300-linesdde-e5f.26b9dd939268809fcbd5.js"],"metadata---componentkit-docs-under-300-lines-9-f-6-fa4":["/componentkit/metadata---componentkit-docs-under-300-lines-9-f-6-fa4.4d7add45a924adcc2a58.js"],"content---componentkit-docs-use-designated-initializer-style-8-b-3-13d":["/componentkit/content---componentkit-docs-use-designated-initializer-style-8-b-3-13d.8e74970da7595a59aeea.js"],"metadata---componentkit-docs-use-designated-initializer-styleaee-b4a":["/componentkit/metadata---componentkit-docs-use-designated-initializer-styleaee-b4a.4ad8c4ab98869cf8845f.js"],"content---componentkit-docs-uses-38-c-1d5":["/componentkit/content---componentkit-docs-uses-38-c-1d5.bd2484ea2872203659c5.js"],"metadata---componentkit-docs-uses-48-d-ca9":["/componentkit/metadata---componentkit-docs-uses-48-d-ca9.a3c8a6db4f7d515809e0.js"],"content---componentkit-docs-viewsd-50-bb3":["/componentkit/content---componentkit-docs-viewsd-50-bb3.e220175691a91ea896f7.js"],"metadata---componentkit-docs-views-189-984":["/componentkit/metadata---componentkit-docs-views-189-984.058761173a4ee158e3eb.js"],"content---componentkit-docs-why-cppe-55-dc5":["/componentkit/content---componentkit-docs-why-cppe-55-dc5.2d61d8c9d19eae40970d.js"],"metadata---componentkit-docs-why-cppd-17-234":["/componentkit/metadata---componentkit-docs-why-cppd-17-234.57a077afe47644dfda3b.js"],"content---componentkit-docs-animationf-93-66e":["/componentkit/content---componentkit-docs-animationf-93-66e.fc50cafadf35dc61a0b1.js"],"metadata---componentkit-docs-animatione-9-c-274":["/componentkit/metadata---componentkit-docs-animatione-9-c-274.1e0c4c7389369b839a1d.js"],"content---componentkit-docs-datasource-dive-deeper-8-dd-227":["/componentkit/content---componentkit-docs-datasource-dive-deeper-8-dd-227.87018a4db20d41aa79d8.js"],"metadata---componentkit-docs-datasource-dive-deeper-425-5de":["/componentkit/metadata---componentkit-docs-datasource-dive-deeper-425-5de.df0df87eb25e4257b3da.js"]};/*]]>*/</script>

<title data-react-helmet="true">Basics</title>

<meta data-react-helmet="true" name="description" content="In this section we will go through the steps to create a `UICollectionView` powered by components."/><meta data-react-helmet="true" property="og:description" content="In this section we will go through the steps to create a `UICollectionView` powered by components."/>

<link data-react-helmet="true" rel="shortcut icon" href="/componentkit/img/favicon/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/componentkit/main.9b8caa244fc614ef5c5c.css" />

<link rel="stylesheet" type="text/css" href="/componentkit/common.80a42d9ba073a370a9c9.css" />

<link rel="stylesheet" type="text/css" href="/componentkit/component---mnt-btrfs-trunk-hg-fbobjc-fbsource-56956024-1560963365-fbobjc-vendor-lib-component-kit-public-website-pages-index-jsd-01-f82.9a73067f6e6848663820.css" />

<link rel="stylesheet" type="text/css" href="/componentkit/component---theme-doc-page-1-be-9be.af01764900ac30f94ad4.css" />

<link rel="stylesheet" type="text/css" href="/componentkit/92.7b9a1aabfe98a952e653.css" />

<link rel="stylesheet" type="text/css" href="/componentkit/vendors.67f29f761cf5f3146dcc.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/componentkit/"><img class="navbar__logo" src="/componentkit/img/ck_logo.png" alt="ComponentKit Logo"/><strong>ComponentKit</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="Docs" position="right" href="/componentkit/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="https://github.com/facebook/componentkit" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_22IHBtpo"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_1OCf5dx- moon_CxBUQ2_8"></span></div><div class="react-toggle-track-x"><span class="toggle_1OCf5dx- sun_16G3y2Q8"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a class="navbar__brand" href="#!" role="button"><img class="navbar__logo" src="/componentkit/img/ck_logo.png" alt="ComponentKit Logo"/><strong>ComponentKit</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="Docs" position="right" href="/componentkit/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/facebook/componentkit" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container container--fluid"><div class="row"><div class="col col--3"><div class="sidebar_1kLs6XCI"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4fDMU" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/philosophy">Philosophy</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/uses">Uses</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/component-api">Component API</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/composite-components">Composite Components</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/views">Views</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/responder-chain">Responder Chain</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/state">State</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/scopes">Scopes</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/component-controllers">Component Controllers</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/lifecycle-methods">Lifecycle Methods</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/animation">Animation</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/debugging">Debugging</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Collection Views</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/datasource-overview">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/componentkit/docs/datasource-basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/datasource-changeset-api">Changeset API</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/datasource-gotchas">Gotchas</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/datasource-dive-deeper">Dive Deeper</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/never-subclass-components">Never Subclass Components</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-overrides">Avoid Overrides</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/indentation">Indentation</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-local-variables">Avoid Local Variables, Use Const</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-single-use-constants">Avoid Single Use Constants</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/no-underscores">No Underscores</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/pass-in-actions">Pass in Actions</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/no-side-effects">No Side Effects</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/pass-in-immutable-objects">Pass in Immutable Objects</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/components-cant-be-delegates">Components Can&#x27;t Be Delegates Directly</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-excessive-branching">Avoid Excessive Branching</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/check-for-nil">Check for Nil</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-push-back">Avoid push_back</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/under-300-lines">Under 300 Lines</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-width-100-percent">Avoid Width 100%</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/use-designated-initializer-style">Use Designated Initializer Style</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/break-out-composites">Break Out Composite Components</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/keep-controller-in-component">Keep Controller in Component</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Infrastructure</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/component-hosting-view">Component Hosting View</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/why-cpp">Why C++</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/advanced-views">Advanced Views</a></li></ul></li></ul></div></div></div><main class="col"><div><div class="padding-vert--lg"><div class="row"><div class="col"><div class="docItemContainer_2cwgKB16"><header><h1 class="margin-bottom--lg">Basics</h1></header><article><div class="markdown"><p>In this section we will go through the steps to create a <code>UICollectionView</code> powered by components.</p><p>We will use a simple setup with a <code>UIViewController</code> using a <code>UICollectionView</code> that uses a <code>UICollectionViewFlowLayout</code>.</p><h3><a aria-hidden="true" class="anchor" id="setup"></a><a aria-hidden="true" class="hash-link" href="#setup">#</a>Setup</h3><h4><a aria-hidden="true" class="anchor" id="component-provider"></a><a aria-hidden="true" class="hash-link" href="#component-provider">#</a>Component Provider</h4><p>The <code>CKCollectionViewDataSource</code> is responsible for transforming each model into a component.</p><p>This transformation will be defined as a method on a class conforming to <code>CKComponentProvider</code>. This class will then be passed to the <code>CKCollectionViewDataSource</code> as the component provider and the datasource will call the provider every time it needs to generate a component for a model.</p><p>Let&#x27;s make our UIViewController be the component provider here.</p><pre class="mdxCodeBlock_iHAB0Zg7"><pre class="prism-code language-objectivec codeBlock_17EU5NC6" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">@interface</span><span class="token plain"> MyController </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">CKComponentProvider</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">@end</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">@implementation</span><span class="token plain"> MyController</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CKComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">componentForModel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MyModel</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">model context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MyContext</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">context </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">MyComponent newWithModel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">model context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span></div></pre></pre><div class="note-important"><p>This class method has to be pure and thread safe.</p></div><ul><li><strong>Why use a class Method and not a block?</strong> The model to component transform should not rely on mutable state. Blocks make it very easy to capture mutable state that could introduce side effects in the system. Using a class method allows to better enforce the constraint of immutability from an API standpoint.</li><li><strong>What is this context ?</strong> The context is an arbitrary immutable object, that is passed to this method by the <code>CKCollectionViewDataSource</code>. Typically, the context can be used to pass into your component tree:
<em> immutable contextual informations such as the type of device.
</em> external dependencies such as an image downloader.</li></ul><div class="note-important"><p>Don&#x27;t access global state inside a Component. Use the context to pass this information instead.</p></div><h4><a aria-hidden="true" class="anchor" id="create-a-ckcollectionviewdatasource"></a><a aria-hidden="true" class="hash-link" href="#create-a-ckcollectionviewdatasource">#</a>Create a <code>CKCollectionViewDataSource</code></h4><p>Ok, so now we have our view controller as the component provider, let&#x27;s create our <code>CKCollectionViewDataSource</code> and attach the collection view to it.</p><pre class="mdxCodeBlock_iHAB0Zg7"><pre class="prism-code language-objectivec codeBlock_17EU5NC6" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">viewDidLoad </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">super</span><span class="token plain"> viewDidLoad</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Range provider</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">_sizeRangeProvider </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKComponentFlexibleSizeRangeProvider providerWithFlexibility</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">CKComponentSizeRangeFlexibleHeight</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> CKSizeRange sizeRange </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">_sizeRangeProvider sizeRangeForBoundingSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">collectionView</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bounds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Data source configuration</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">CKDataSourceConfiguration </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">configuration </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKDataSourceConfiguration alloc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> initWithComponentProvider</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token plain"> class</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">context sizeRange</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">sizeRange</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Data source                       </span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">_dataSource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKCollectionViewDataSource alloc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> initWithCollectionView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">collectionView supplementaryViewDataSource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">nil configuration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">configuration</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span></div></pre></pre><p>Note that we pass the context in the initializer. It is the same context that will get passed into <code>+ (CKComponent *)componentForModel:context:</code> every time a component needs to be computed.</p><h3><a aria-hidden="true" class="anchor" id="addmodify-content-in-the-collection-view"></a><a aria-hidden="true" class="hash-link" href="#addmodify-content-in-the-collection-view">#</a>Add/Modify content in the collection view</h3><h4><a aria-hidden="true" class="anchor" id="changeset-api"></a><a aria-hidden="true" class="hash-link" href="#changeset-api">#</a>Changeset API</h4><p>Using <code>CKCollectionViewDataSource</code> changes are never applied directly to the collection. Instead, commands are sent to the datasource and from those commands will be used to compute the components and apply the corresponding changes to the collection view.</p><p>Let&#x27;s add a section at index 0 with two items at indexes 0 and 1.</p><pre class="mdxCodeBlock_iHAB0Zg7"><pre class="prism-code language-objectivec codeBlock_17EU5NC6" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">viewDidAppear</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">animated </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">super</span><span class="token plain"> viewDidAppear</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">animated</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  CKDataSourceChangeset </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">initialChangeset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKDataSourceChangesetBuilder transactionalComponentDataSourceChangeset</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    withInsertedSections</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSIndexSet indexSetWithIndex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Don&#x27;t forget the insertion of section 0</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      withInsertedItems</span><span class="token punctuation" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">@</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSIndexPath indexPathForItem</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> inSection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> firstModel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSIndexPath indexPathForItem</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> inSection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secondModel</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> build</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dataSource applyChangeset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">initialChangeset mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">CKUpdateModeAsynchronous userInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">nil</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></pre><p>Later on (for instance when updated data is received from the server), we can update our first item with an updated model.</p><pre class="mdxCodeBlock_iHAB0Zg7"><pre class="prism-code language-objectivec codeBlock_17EU5NC6" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">CKDataSourceChangeset </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">updateChangeset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKDataSourceChangesetBuilder transactionalComponentDataSourceChangeset</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> withUpdatedItems</span><span class="token punctuation" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">@</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSIndexPath indexPathForItem</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> inSection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> updatedFirstModel</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> build</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dataSource applyChangeset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">updateChangeset mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">CKUpdateModeAsynchronous userInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">nil</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span></div></pre></pre><p>It is also possible to remove items and sections through this <a href="./datasource-changeset-api">changeset API</a>.</p><h4><a aria-hidden="true" class="anchor" id="layout"></a><a aria-hidden="true" class="hash-link" href="#layout">#</a>Layout</h4><p>As you can see above a <em>constrained size</em> is passed every time a changeset is enqueued, this constrained size is used internally to layout the components and compute their final sizes which will have to be within those top-level constraints.</p><p>The form of the constrained size is: {% raw  %}<code>{{minWidth, minHeight},{maxWidth, maxHeight}}</code>{% endraw %}.</p><p>Let&#x27;s see how the computed component sizes can be used with the <code>UICollectionViewFlowLayout</code>, for the purpose of this example let&#x27;s assume that the view controller is the delegate of the flow layout.</p><p>Each item is sized so that it matches the size of its corresponding component.</p><pre class="mdxCodeBlock_iHAB0Zg7"><pre class="prism-code language-objectivec codeBlock_17EU5NC6" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CGSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">collectionView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UICollectionView </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">collectionView layout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UICollectionViewLayout </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">collectionViewLayout sizeForItemAtIndexPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NSIndexPath </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">indexPath </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dataSource sizeForItemAtIndexPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">indexPath</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></pre><p>Pretty simple right ? And this logic can apply to any <code>UICollectionViewLayout</code> :</p><ul><li>The datasource computes the size of the components within the top level constraint.</li><li>Then those sizes can be used in a <code>UICollectionViewLayout</code> to size and position the corresponding items.</li></ul><h3><a aria-hidden="true" class="anchor" id="handle-actions"></a><a aria-hidden="true" class="hash-link" href="#handle-actions">#</a>Handle actions</h3><p>Time to interact with those items now; nothing special here the regular selection APIs can be used. Let&#x27;s say the models have a url that should be opened when the user tap on an item.</p><pre class="mdxCodeBlock_iHAB0Zg7"><pre class="prism-code language-objectivec codeBlock_17EU5NC6" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">collectionView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UICollectionView </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">collectionView didSelectItemAtIndexPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NSIndexPath </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">indexPath</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    MyModel </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MyModel </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dataSource modelForItemAtIndexPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">indexPath</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">url </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIApplication sharedApplication</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> openURL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">navURL</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></pre><div class="note-important"><p>The datasource is the source of truth for the collection view, if you have to retrieve a model corresponding to an indexPath always use <code>-modelForItemAtIndexPath</code>. See this <a href="./datasource-gotchas">gotcha</a> for more details.</p></div></div></article><div class="margin-top--xl margin-bottom--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/componentkit/docs/datasource-overview"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label"> <!-- -->Overview</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/componentkit/docs/datasource-changeset-api"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Changeset API<!-- --> </h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNYj2De"><ul class="contents contents__left-border"><li><a href="#setup" class="contents__link">Setup</a></li><li><a href="#addmodify-content-in-the-collection-view" class="contents__link">Add/Modify content in the collection view</a></li><li><a href="#handle-actions" class="contents__link">Handle actions</a></li></ul></div></div></div></div></div></main></div></div>
</div>

<script type="text/javascript" src="/componentkit/runtime~main.6a5452c411aa78299722.js"></script>

<script type="text/javascript" src="/componentkit/main.9b8caa244fc614ef5c5c.js"></script>

<script type="text/javascript" src="/componentkit/common.80a42d9ba073a370a9c9.js"></script>

<script type="text/javascript" src="/componentkit/component---mnt-btrfs-trunk-hg-fbobjc-fbsource-56956024-1560963365-fbobjc-vendor-lib-component-kit-public-website-pages-index-jsd-01-f82.9a73067f6e6848663820.js"></script>

<script type="text/javascript" src="/componentkit/component---mnt-btrfs-trunk-hg-fbobjc-fbsource-56956024-1560963365-fbobjc-vendor-lib-component-kit-public-website-pages-support-jsa-67-1b4.037ead21e3a432f21dd9.js"></script>

<script type="text/javascript" src="/componentkit/component---theme-doc-page-1-be-9be.af01764900ac30f94ad4.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-actionsfab-d0f.3907c360adc5dd8a0d60.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-advanced-viewsaca-2cd.99885586a8ec6d6712ff.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-animationf-93-66e.fc50cafadf35dc61a0b1.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-excessive-branchinga-6-f-163.ff8aea9acdc6dd5a9885.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-local-variables-648-679.a9e3920c6bc53d6dc7af.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-overridesf-3-f-140.9758abb20781c06de9fd.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-push-back-0-da-f6f.0650ccbd534719d9f821.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-single-use-constants-41-c-5bb.b5c3174ccbbdf292b4cd.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-width-100-percentaff-e53.e9de43b6934ac4acc844.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-break-out-compositese-44-0fe.deb356f4e92773b84cd2.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-check-for-nil-511-72e.b09e51bc575731de2244.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-component-apidfd-88a.3edb12304e56552b4256.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-component-controllers-54-a-e7a.15be7280ba858d944e0e.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-component-hosting-view-79-d-848.d58ce01d53d4f33a2b15.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-components-cant-be-delegates-85-d-81d.fee59ed1e4073708fe44.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-composite-componentsae-8-64b.d6b828c4ff5aa1544535.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-basics-73-a-54c.4b2a5918aa221fb1ca19.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-changeset-api-609-e50.22e44caca376bd9ec868.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-dive-deeper-8-dd-227.87018a4db20d41aa79d8.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-gotchas-10-e-3cd.4ab72c7021d0a320df65.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-overview-031-b7b.c701b339caa26c4d87cb.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-debuggingea-2-4dc.f07b4b3f0a2e8bc03c74.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-getting-started-88-e-5ee.cff3b32528ae4f538b5a.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-indentationda-9-241.09b1fce2c6e3b2b87b56.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-keep-controller-in-component-8-e-3-d15.45fc916c1042b2c1c575.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-layout-206-2c6.b6abac4fa3430d6cf0b7.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-lifecycle-methodsa-85-8d2.564dcdb614c4d0ce1f15.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-never-subclass-components-372-47f.5f84e2c7094d99bba2df.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-no-side-effects-4-cb-0bf.4fd76fa4156ad1322389.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-no-underscoresc-7-f-d8a.70771e4a4d05f494ed11.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-pass-in-actions-034-b64.60e25be4f040f96edc37.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-pass-in-immutable-objects-170-281.1517ea734a0f23e88066.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-philosophy-0-dd-06e.a5d27746a7479891fcc2.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-responder-chaina-82-abc.92963c6502b0e3308d50.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-scopes-4-e-1-141.92da4190264fd78a37e4.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-state-65-e-609.8b8b3a3430e6c9ff46b7.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-under-300-linesdde-e5f.26b9dd939268809fcbd5.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-use-designated-initializer-style-8-b-3-13d.8e74970da7595a59aeea.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-uses-38-c-1d5.bd2484ea2872203659c5.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-viewsd-50-bb3.e220175691a91ea896f7.js"></script>

<script type="text/javascript" src="/componentkit/content---componentkit-docs-why-cppe-55-dc5.2d61d8c9d19eae40970d.js"></script>

<script type="text/javascript" src="/componentkit/92.7b9a1aabfe98a952e653.js"></script>

<script type="text/javascript" src="/componentkit/vendors.67f29f761cf5f3146dcc.js"></script>

<script type="text/javascript" src="/componentkit/docsMetadata---componentkit-docs-3-a-2-70c.4281021fd793e785377b.js"></script>

<script type="text/javascript" src="/componentkit/metadata---componentkit-docs-datasource-basics-132-b80.09b82bebad598a7714f3.js"></script>

</body>
</html>