<!DOCTYPE html>
<html lang=&#34;en&#34; data-theme=&#34;&#34;>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/componentkit/main.4b9bce3e656c811ec5d3.css","/componentkit/main.4b9bce3e656c811ec5d3.js"],"component---users-fabiomilano-documents-git-hub-componentkit-website-pages-index-js-05-c-a28":["/componentkit/component---users-fabiomilano-documents-git-hub-componentkit-website-pages-index-js-05-c-a28.ee72d2da1191f00fd858.css","/componentkit/component---users-fabiomilano-documents-git-hub-componentkit-website-pages-index-js-05-c-a28.ee72d2da1191f00fd858.js"],"metadata---componentkit-c-45-69f":["/componentkit/metadata---componentkit-c-45-69f.b2c016ffc585204218ca.js"],"component---users-fabiomilano-documents-git-hub-componentkit-website-pages-support-jse-39-96d":["/componentkit/component---users-fabiomilano-documents-git-hub-componentkit-website-pages-support-jse-39-96d.f80afda51a61142eeb2f.js"],"metadata---componentkit-support-121-8fb":["/componentkit/metadata---componentkit-support-121-8fb.304b39a8fd8290b1056e.js"],"component---theme-doc-page-1-be-9be":[],"docsMetadata---componentkit-docsbec-70c":["/componentkit/docsMetadata---componentkit-docsbec-70c.bc08fe525961777eaaee.js"],"component---theme-doc-item-178-a40":[],"content---componentkit-docs-avoid-excessive-branching-569-20c":["/componentkit/content---componentkit-docs-avoid-excessive-branching-569-20c.513365a4774af3bcec17.js"],"metadata---componentkit-docs-avoid-excessive-branching-85-a-125":["/componentkit/metadata---componentkit-docs-avoid-excessive-branching-85-a-125.f690ed32d5721204a9c7.js"],"content---componentkit-docs-advanced-views-3-b-8-088":["/componentkit/content---componentkit-docs-advanced-views-3-b-8-088.a99f8b58022c5e6214eb.js"],"metadata---componentkit-docs-advanced-views-857-0ea":["/componentkit/metadata---componentkit-docs-advanced-views-857-0ea.bcf81b488d89e6f368a6.js"],"content---componentkit-docs-avoid-push-backd-44-b09":["/componentkit/content---componentkit-docs-avoid-push-backd-44-b09.9a795bf30a703a807109.js"],"metadata---componentkit-docs-avoid-push-back-6-cf-ee1":["/componentkit/metadata---componentkit-docs-avoid-push-back-6-cf-ee1.d5094bf6661426bdec76.js"],"content---componentkit-docs-actions-38-b-470":["/componentkit/content---componentkit-docs-actions-38-b-470.7bc764d3f18f4c82e7ef.js"],"metadata---componentkit-docs-actionsb-2-b-a21":["/componentkit/metadata---componentkit-docs-actionsb-2-b-a21.c17dfececd5e18cf5b1d.js"],"content---componentkit-docs-avoid-single-use-constants-0-df-869":["/componentkit/content---componentkit-docs-avoid-single-use-constants-0-df-869.4e685b796a2d7e12fa95.js"],"metadata---componentkit-docs-avoid-single-use-constants-995-8db":["/componentkit/metadata---componentkit-docs-avoid-single-use-constants-995-8db.2f00ef36dd38604961d3.js"],"content---componentkit-docs-avoid-overridesffc-ed5":["/componentkit/content---componentkit-docs-avoid-overridesffc-ed5.a97f3ac07a1b2aeaad3b.js"],"metadata---componentkit-docs-avoid-overrides-3-d-0-b6f":["/componentkit/metadata---componentkit-docs-avoid-overrides-3-d-0-b6f.9138d9951fabb3e517f7.js"],"content---componentkit-docs-avoid-local-variablesfb-3-1ed":["/componentkit/content---componentkit-docs-avoid-local-variablesfb-3-1ed.270a86ddc0ac874c8c17.js"],"metadata---componentkit-docs-avoid-local-variables-7-ef-e00":["/componentkit/metadata---componentkit-docs-avoid-local-variables-7-ef-e00.d36b00dcea3f15fa0693.js"],"content---componentkit-docs-avoid-width-100-percentf-3-e-0a8":["/componentkit/content---componentkit-docs-avoid-width-100-percentf-3-e-0a8.eb3549bede8267adc9ce.js"],"metadata---componentkit-docs-avoid-width-100-percent-4-c-8-c71":["/componentkit/metadata---componentkit-docs-avoid-width-100-percent-4-c-8-c71.f0497f26b05e2ff4b119.js"],"content---componentkit-docs-component-controllers-2-f-2-88b":["/componentkit/content---componentkit-docs-component-controllers-2-f-2-88b.fa4cf54cce1334b2c2ca.js"],"metadata---componentkit-docs-component-controllersf-29-581":["/componentkit/metadata---componentkit-docs-component-controllersf-29-581.db983e7c0805e9641031.js"],"content---componentkit-docs-break-out-composites-675-dea":["/componentkit/content---componentkit-docs-break-out-composites-675-dea.f80adddbb1b9d41a1acd.js"],"metadata---componentkit-docs-break-out-composites-01-e-4ee":["/componentkit/metadata---componentkit-docs-break-out-composites-01-e-4ee.a17763970661b61504f5.js"],"content---componentkit-docs-check-for-nil-015-0d2":["/componentkit/content---componentkit-docs-check-for-nil-015-0d2.63ba19df68d6b030db57.js"],"metadata---componentkit-docs-check-for-nilf-79-689":["/componentkit/metadata---componentkit-docs-check-for-nilf-79-689.7683c9325ec39b5a7c2d.js"],"content---componentkit-docs-component-api-81-e-a78":["/componentkit/content---componentkit-docs-component-api-81-e-a78.a726d2e9150ede080570.js"],"metadata---componentkit-docs-component-apic-7-f-ca0":["/componentkit/metadata---componentkit-docs-component-apic-7-f-ca0.ac86b3f20a2b662163b8.js"],"content---componentkit-docs-component-hosting-view-5-a-5-dd2":["/componentkit/content---componentkit-docs-component-hosting-view-5-a-5-dd2.1a2680c3e91135a3fd20.js"],"metadata---componentkit-docs-component-hosting-viewf-0-b-99a":["/componentkit/metadata---componentkit-docs-component-hosting-viewf-0-b-99a.04f8d37699cac8abb423.js"],"content---componentkit-docs-components-cant-be-delegatesc-27-24e":["/componentkit/content---componentkit-docs-components-cant-be-delegatesc-27-24e.b7b95be3db9a43d71ce3.js"],"metadata---componentkit-docs-components-cant-be-delegatesd-77-6d3":["/componentkit/metadata---componentkit-docs-components-cant-be-delegatesd-77-6d3.c6df69d168514fbfc750.js"],"content---componentkit-docs-composite-components-621-083":["/componentkit/content---componentkit-docs-composite-components-621-083.d281afdb33abe4dcac06.js"],"metadata---componentkit-docs-composite-components-138-730":["/componentkit/metadata---componentkit-docs-composite-components-138-730.5c615064f2b71355b0bb.js"],"content---componentkit-docs-datasource-changeset-apic-91-766":["/componentkit/content---componentkit-docs-datasource-changeset-apic-91-766.10159b4f2736c6440058.js"],"metadata---componentkit-docs-datasource-changeset-apib-1-d-3a1":["/componentkit/metadata---componentkit-docs-datasource-changeset-apib-1-d-3a1.12ed4042335b285bedbe.js"],"content---componentkit-docs-datasource-basics-8-a-5-0b9":["/componentkit/content---componentkit-docs-datasource-basics-8-a-5-0b9.39839ff17c2e671e6541.js"],"metadata---componentkit-docs-datasource-basics-3-d-4-b06":["/componentkit/metadata---componentkit-docs-datasource-basics-3-d-4-b06.2567b6b57c206aa147d4.js"],"content---componentkit-docs-datasource-gotchas-108-39f":["/componentkit/content---componentkit-docs-datasource-gotchas-108-39f.0d934094cde48f5282d4.js"],"metadata---componentkit-docs-datasource-gotchas-019-f9b":["/componentkit/metadata---componentkit-docs-datasource-gotchas-019-f9b.bcc33f1417292187d0a3.js"],"content---componentkit-docs-datasource-overview-1-e-0-99b":["/componentkit/content---componentkit-docs-datasource-overview-1-e-0-99b.eefae232d3201330d018.js"],"metadata---componentkit-docs-datasource-overviewcc-5-b9a":["/componentkit/metadata---componentkit-docs-datasource-overviewcc-5-b9a.e85818dc218985a1bca4.js"],"content---componentkit-docs-indentation-97-b-087":["/componentkit/content---componentkit-docs-indentation-97-b-087.14f2468b9d0eedd21318.js"],"metadata---componentkit-docs-indentationaa-0-093":["/componentkit/metadata---componentkit-docs-indentationaa-0-093.6fb6fe63e7bd63216dd0.js"],"content---componentkit-docs-getting-started-240-4d4":["/componentkit/content---componentkit-docs-getting-started-240-4d4.05e1312bce3205d79022.js"],"metadata---componentkit-docs-getting-startedcb-4-d9c":["/componentkit/metadata---componentkit-docs-getting-startedcb-4-d9c.1cdaa39b508b4ad2560d.js"],"content---componentkit-docs-keep-controller-in-component-0-d-2-25e":["/componentkit/content---componentkit-docs-keep-controller-in-component-0-d-2-25e.28514be7aad03f507487.js"],"metadata---componentkit-docs-keep-controller-in-component-9-d-5-01c":["/componentkit/metadata---componentkit-docs-keep-controller-in-component-9-d-5-01c.e74fe68a048c4c522a86.js"],"content---componentkit-docs-debugging-4-cd-636":["/componentkit/content---componentkit-docs-debugging-4-cd-636.7cd14207da020e98e87e.js"],"metadata---componentkit-docs-debugging-532-f25":["/componentkit/metadata---componentkit-docs-debugging-532-f25.8c2203ec71f311b36314.js"],"content---componentkit-docs-never-subclass-components-5-dc-89d":["/componentkit/content---componentkit-docs-never-subclass-components-5-dc-89d.a1cc6eddc718f787fa7b.js"],"metadata---componentkit-docs-never-subclass-components-680-8a7":["/componentkit/metadata---componentkit-docs-never-subclass-components-680-8a7.000099305145b2dff687.js"],"content---componentkit-docs-layoutf-7-a-ff1":["/componentkit/content---componentkit-docs-layoutf-7-a-ff1.6e92b0eb55c94fe9d0ec.js"],"metadata---componentkit-docs-layoute-10-d05":["/componentkit/metadata---componentkit-docs-layoute-10-d05.ea7b8f66656447bd529a.js"],"content---componentkit-docs-no-side-effectsdfa-665":["/componentkit/content---componentkit-docs-no-side-effectsdfa-665.6335e71be575898ba03a.js"],"metadata---componentkit-docs-no-side-effects-100-6bc":["/componentkit/metadata---componentkit-docs-no-side-effects-100-6bc.07a878d3e5f7aba4a253.js"],"content---componentkit-docs-lifecycle-methodseca-0be":["/componentkit/content---componentkit-docs-lifecycle-methodseca-0be.8168b8fa882bbe25f9a4.js"],"metadata---componentkit-docs-lifecycle-methods-488-106":["/componentkit/metadata---componentkit-docs-lifecycle-methods-488-106.27249e6832d30bdfb2b4.js"],"content---componentkit-docs-no-underscoresd-33-4f7":["/componentkit/content---componentkit-docs-no-underscoresd-33-4f7.131a755465ca0d13c31a.js"],"metadata---componentkit-docs-no-underscorese-45-e05":["/componentkit/metadata---componentkit-docs-no-underscorese-45-e05.2707a062fe58bc1b3ac3.js"],"content---componentkit-docs-philosophy-86-b-339":["/componentkit/content---componentkit-docs-philosophy-86-b-339.0b41254115f6e2e4819d.js"],"metadata---componentkit-docs-philosophyb-30-fac":["/componentkit/metadata---componentkit-docs-philosophyb-30-fac.361efea7406c01754000.js"],"content---componentkit-docs-pass-in-immutable-objects-98-d-7fa":["/componentkit/content---componentkit-docs-pass-in-immutable-objects-98-d-7fa.4a4c78752c84f5f822c4.js"],"metadata---componentkit-docs-pass-in-immutable-objects-45-d-f27":["/componentkit/metadata---componentkit-docs-pass-in-immutable-objects-45-d-f27.bc897c716caebd375760.js"],"content---componentkit-docs-pass-in-actions-074-baf":["/componentkit/content---componentkit-docs-pass-in-actions-074-baf.df6f7683a208bc44c25d.js"],"metadata---componentkit-docs-pass-in-actionscef-0bc":["/componentkit/metadata---componentkit-docs-pass-in-actionscef-0bc.4e7f849a7c2412856c9a.js"],"content---componentkit-docs-responder-chain-423-cfe":["/componentkit/content---componentkit-docs-responder-chain-423-cfe.dfa8947ab513c65afc8a.js"],"metadata---componentkit-docs-responder-chainc-53-406":["/componentkit/metadata---componentkit-docs-responder-chainc-53-406.678139cfd2cec19ff15f.js"],"content---componentkit-docs-state-881-c75":["/componentkit/content---componentkit-docs-state-881-c75.e22f16ad5c7ad83963e3.js"],"metadata---componentkit-docs-state-44-b-fb9":["/componentkit/metadata---componentkit-docs-state-44-b-fb9.60569f4ae040e2cf6959.js"],"content---componentkit-docs-under-300-linesfcb-529":["/componentkit/content---componentkit-docs-under-300-linesfcb-529.37f523eccf9249ababef.js"],"metadata---componentkit-docs-under-300-linesde-4-335":["/componentkit/metadata---componentkit-docs-under-300-linesde-4-335.1ec1a03e741402666c97.js"],"content---componentkit-docs-scopes-14-d-211":["/componentkit/content---componentkit-docs-scopes-14-d-211.7b551fa224550db7cf0c.js"],"metadata---componentkit-docs-scopes-6-d-7-7ae":["/componentkit/metadata---componentkit-docs-scopes-6-d-7-7ae.63f8ff16f2bdcc3dba18.js"],"content---componentkit-docs-use-designated-initializer-style-7-c-3-c98":["/componentkit/content---componentkit-docs-use-designated-initializer-style-7-c-3-c98.8a1eac948b291627da29.js"],"metadata---componentkit-docs-use-designated-initializer-style-74-b-365":["/componentkit/metadata---componentkit-docs-use-designated-initializer-style-74-b-365.d4c5bad519b239a56a34.js"],"content---componentkit-docs-uses-4-b-4-19f":["/componentkit/content---componentkit-docs-uses-4-b-4-19f.af65a0a2726632dcf23a.js"],"metadata---componentkit-docs-usese-95-d5d":["/componentkit/metadata---componentkit-docs-usese-95-d5d.213ab6040408ed67c724.js"],"content---componentkit-docs-why-cpp-4-de-fb5":["/componentkit/content---componentkit-docs-why-cpp-4-de-fb5.d83d907f1dcd8ed1e1bc.js"],"metadata---componentkit-docs-why-cppce-0-54b":["/componentkit/metadata---componentkit-docs-why-cppce-0-54b.1c26dfe119e04392a97c.js"],"content---componentkit-docs-viewsf-64-b27":["/componentkit/content---componentkit-docs-viewsf-64-b27.de9142744a053b0d45f1.js"],"metadata---componentkit-docs-viewsaa-6-3b9":["/componentkit/metadata---componentkit-docs-viewsaa-6-3b9.a63743ed20d3619865bb.js"],"content---componentkit-docs-fb-super-secret-6-a-8-2e2":["/componentkit/content---componentkit-docs-fb-super-secret-6-a-8-2e2.2c864dd689d7dd4f1dce.js"],"metadata---componentkit-docs-fb-super-secret-32-b-bf9":["/componentkit/metadata---componentkit-docs-fb-super-secret-32-b-bf9.b529145b794c257ed683.js"],"content---componentkit-docs-animation-41-c-028":["/componentkit/content---componentkit-docs-animation-41-c-028.d336666703b1107516a4.js"],"metadata---componentkit-docs-animationbb-8-fd4":["/componentkit/metadata---componentkit-docs-animationbb-8-fd4.e20f49763f615753caf1.js"],"content---componentkit-docs-datasource-dive-deeper-2-a-8-f3b":["/componentkit/content---componentkit-docs-datasource-dive-deeper-2-a-8-f3b.e32a48b48e41a0d804ac.js"],"metadata---componentkit-docs-datasource-dive-deeperfc-1-6d3":["/componentkit/metadata---componentkit-docs-datasource-dive-deeperfc-1-6d3.719ecbd2d6c6ed41db34.js"]};/*]]>*/</script><title data-react-helmet="true">Gotchas</title><meta data-react-helmet="true" name="description" content="## Don&#x27;t forget the initial section"/><meta data-react-helmet="true" property="og:description" content="## Don&#x27;t forget the initial section"/><link data-react-helmet="true" href="https://infima-dev.netlify.com/css/default/default.min.css" preload="true" rel="stylesheet" type="text/css"/><link data-react-helmet="true" rel="shortcut icon" href="/componentkit/img/favicon/favicon.ico"/><link rel="stylesheet" type="text/css" href="/componentkit/main.4b9bce3e656c811ec5d3.css" />
<link rel="stylesheet" type="text/css" href="/componentkit/component---users-fabiomilano-documents-git-hub-componentkit-website-pages-index-js-05-c-a28.ee72d2da1191f00fd858.css" />
<link rel="stylesheet" type="text/css" href="/componentkit/vendors.9ea80749c2b35c6967e3.css" />
</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/componentkit/"><img class="navbar__logo" src="/componentkit/img/ck_logo.png" alt="ComponentKit Logo"/><strong>ComponentKit</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="Docs" position="right" href="/componentkit/docs/getting-started">Docs</a><a class="navbar__item navbar__link" label="API" position="right" href="/componentkit/api">API</a><a class="navbar__item navbar__link" label="Support" position="right" href="/componentkit/support">Support</a><a class="navbar__item navbar__link" href="https://github.com/facebook/componentkit" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle large__viewport"><div class="react-toggle-track"><div class="react-toggle-track-check"><svg width="14" height="11" viewBox="0 0 14 11"><title>switch-check</title><path d="M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0" fill="#fff" fill-rule="evenodd"></path></svg></div><div class="react-toggle-track-x"><svg width="10" height="10" viewBox="0 0 10 10"><title>switch-x</title><path d="M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12" fill="#fff" fill-rule="evenodd"></path></svg></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a class="navbar__brand" href="#!" role="button"><img class="navbar__logo" src="/componentkit/img/ck_logo.png" alt="ComponentKit Logo"/><strong>ComponentKit</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="Docs" position="right" href="/componentkit/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" label="API" position="right" href="/componentkit/api">API</a></li><li class="menu__list-item"><a class="menu__link" label="Support" position="right" href="/componentkit/support">Support</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/facebook/componentkit" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container container--fluid"><div class="row"><div class="col col--3"><div class="menu menu--responsive sidebar"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/philosophy">Philosophy</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/uses">Uses</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/component-api">Component API</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/composite-components">Composite Components</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/views">Views</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/responder-chain">Responder Chain</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/state">State</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/scopes">Scopes</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/component-controllers">Component Controllers</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/lifecycle-methods">Lifecycle Methods</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/animation">Animation</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/debugging">Debugging</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Collection Views</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/datasource-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/datasource-basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/datasource-changeset-api">Changeset API</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/componentkit/docs/datasource-gotchas">Gotchas</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/datasource-dive-deeper">Dive Deeper</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/never-subclass-components">Never Subclass Components</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-overrides">Avoid Overrides</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/indentation">Indentation</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-local-variables">Avoid Local Variables, Use Const</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-single-use-constants">Avoid Single Use Constants</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/no-underscores">No Underscores</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/pass-in-actions">Pass in Actions</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/no-side-effects">No Side Effects</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/pass-in-immutable-objects">Pass in Immutable Objects</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/components-cant-be-delegates">Components Can&#x27;t Be Delegates Directly</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-excessive-branching">Avoid Excessive Branching</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/check-for-nil">Check for Nil</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-push-back">Avoid push_back</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/under-300-lines">Under 300 Lines</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/avoid-width-100-percent">Avoid Width 100%</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/use-designated-initializer-style">Use Designated Initializer Style</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/break-out-composites">Break Out Composite Components</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/keep-controller-in-component">Keep Controller in Component</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Infrastructure</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/component-hosting-view">Component Hosting View</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/why-cpp">Why C++</a></li><li class="menu__list-item"><a class="menu__link" href="/componentkit/docs/advanced-views">Advanced Views</a></li></ul></li></ul></div></div><div class="col col--9"><div class="docBody_35hwFDsT"><div class="container margin-vert--lg"><div class="row"><div class="col col--8"><header><h1 class="margin-bottom--lg">Gotchas</h1></header><article><div class="markdown"><h2><a aria-hidden="true" class="anchor" id="dont-forget-the-initial-section"></a><a aria-hidden="true" class="hash-link" href="#dont-forget-the-initial-section">#</a>Don&#x27;t forget the initial section</h2><p>A datasource will initially be totally empty (no items and no sections). Inserting items in section 0 before inserting section 0 will cause an exception to be raised.</p><pre class="language-objectivec"><code class="language-objectivec" metastring="highlight">CKComponentCollectionViewDataSource datasource <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>CKComponentCollectionViewDataSource alloc<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
CKArrayControllerInputItems items<span class="token punctuation">;</span>
CKArrayControllerSections sections<span class="token punctuation">;</span>
sections<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
items<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">@&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>datasource enqueueChangeset<span class="token punctuation">:</span><span class="token punctuation">{</span>sections<span class="token punctuation">,</span> items<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="note"><p>Why not have one section by default? Because implicit/default behaviors can be confusing. If that behavior was implemented as a default but not documented, it would be very confusing when inserting a section at index 0 on a newly created datasource will actually cause it to have two sections (we already have the one created by default). Obviously documentation would make things better but it&#x27;s easy to miss a piece of documentation...</p></div><h2><a aria-hidden="true" class="anchor" id="lifecycle"></a><a aria-hidden="true" class="hash-link" href="#lifecycle">#</a>Lifecycle</h2><p>The lifecycle of the datasource should match the lifecycle of the collection view or table view it is used with. You might otherwise end up with the content of your list view being out of sync with the internal state of the datasource and this will cause a crash eventually.</p><h2><a aria-hidden="true" class="anchor" id="the-datasource-involves-asynchronous-operations"></a><a aria-hidden="true" class="hash-link" href="#the-datasource-involves-asynchronous-operations">#</a>The datasource involves asynchronous operations</h2><p><strong>Each changeset is computed asynchronously</strong> by <code>CKComponentDatasource</code>, therefore the corresponding changes are not reflected immediately on the corresponding <code>UITableView</code> or <code>UICollectionView</code> and it is important to be careful about sources of data being out of sync.</p><h4><a aria-hidden="true" class="anchor" id="always-ask-the-datasource-for-the-model-corresponding-to-an-index-path"></a><a aria-hidden="true" class="hash-link" href="#always-ask-the-datasource-for-the-model-corresponding-to-an-index-path">#</a>Always ask the datasource for the model corresponding to an index path</h4><p>The datasource maintains an internal data structure which is the only source of truth for the corresponding <code>UICollectionView</code> or <code>UITableView</code>. For this reason you should query the datasource to get information associated with a certain indexPath. Any other source of data may be out of sync with the current state of the list view.</p><p>For instance to access the model associated to a certain index path using a <code>CKCollectionViewDataSource</code> you can use:</p><pre class="language-objectivec"><code class="language-objectivec" metastring="highlight"><span class="token punctuation">[</span>datasource modelForItemAtIndexPath<span class="token punctuation">:</span>indexPath<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><p>Now let&#x27;s look at what could go wrong if we query another source of data.</p><pre class="language-objectivec"><code class="language-objectivec" metastring="highlight"><span class="token keyword">@implementation</span> MyAwesomeController <span class="token punctuation">{</span>
    CKComponentCollectionViewDataSource <span class="token operator">*</span>_datasource<span class="token punctuation">;</span>
    NSMutableArray <span class="token operator">*</span>_listOfModels<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>insertAtHead<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>model <span class="token punctuation">{</span>
<span class="token comment">// We first add the new model (B) at the beginning of _listOfModels which already contained (A)</span>
    <span class="token comment">// [A] -&gt; [B, A]</span>
  <span class="token punctuation">[</span>_listOfModels insertObject<span class="token punctuation">:</span>model atIndex<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  CKArrayControllerInputItems items<span class="token punctuation">;</span>
  items<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Enqueue the changeset asynchronously in the datasource</span>
  <span class="token punctuation">[</span>_datasource enqueueChangeset<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> items<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>didSelectitemAtIndexPath<span class="token punctuation">:</span><span class="token punctuation">(</span>NSIndexPath <span class="token operator">*</span><span class="token punctuation">)</span>indexPath <span class="token punctuation">{</span>
<span class="token comment">// At the same time the user taps on the cell that represents A, which is still located at the indexPath (0,0)</span>
<span class="token comment">// as the changeset has not finished computing yet.</span>
<span class="token comment">// Ouch we actually get B, list of models and the collection view are out of sync</span>
<span class="token punctuation">[</span>_listOfModels objectAtIndex<span class="token punctuation">:</span>indexPath<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// [_datasource modelForItemAtIndexPath:indexPath] would have properly returned A</span>
<span class="token punctuation">}</span>
</code></pre><h4><a aria-hidden="true" class="anchor" id="dont-ask-the-the-list-view-for-the-position-of-the-next-insertion"></a><a aria-hidden="true" class="hash-link" href="#dont-ask-the-the-list-view-for-the-position-of-the-next-insertion">#</a>Don&#x27;t ask the the list view for the position of the next insertion</h4><p>The datasource gives you the current state of what is displayed on the screen, but it doesn&#x27;t include what is potentially currently being computed in the background. To get this information you need to maintain state that is updated at the same time as a changeset is enqueued.</p><p>Let&#x27;s look at this buggy code that uses the datasource to compute the insertion index.</p><p>{: .redhighlight }</p><pre class="language-objectivec"><code class="language-objectivec" metastring="highlight"><span class="token keyword">@implementation</span> MyAwesomeController <span class="token punctuation">{</span>
    CKComponentCollectionViewDataSource <span class="token operator">*</span>_datasource<span class="token punctuation">;</span>
    NSMutableArray <span class="token operator">*</span>_listOfModels<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>insertAtTail<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>model <span class="token punctuation">{</span>
<span class="token comment">// We first add the new model (C) at the end of _listOfModels which already contains (A) et (B)</span>
    <span class="token comment">// [A, B] -&gt; [A, B, C]</span>
  <span class="token punctuation">[</span>_listOfModels addObject<span class="token punctuation">:</span>model<span class="token punctuation">]</span><span class="token punctuation">;</span>
  CKArrayControllerInputItems items<span class="token punctuation">;</span>
  <span class="token comment">// Only A is in the tableView, the components for B are still computed in the background</span>
  <span class="token comment">// so numberOfItemsInSection returns 1, C will be inserted at index 1 and we will end up</span>
  <span class="token comment">// with a list view displaying [A, C, B]</span>
  Items<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> _datasource<span class="token punctuation">.</span>collectionView numberOfItemsInSection<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Enqueue the changeset asynchronously in the datasource</span>
  <span class="token punctuation">[</span>_datasource enqueueChangeset<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> items<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>In <code>-insertAtTail</code> we should check <code>_listOfModels</code> instead to compute the insertion index.</p><pre class="language-objectivec"><code class="language-objectivec" metastring="highlight"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>insertAtTail<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>model <span class="token punctuation">{</span>
<span class="token comment">// We first add the new model (C) at the end of _listOfModels which already contains (A) et (B)</span>
    <span class="token comment">// [A, B] -&gt; [A, B, C]</span>
  <span class="token punctuation">[</span>_listOfModels addObject<span class="token punctuation">:</span>model<span class="token punctuation">]</span><span class="token punctuation">;</span>
  CKArrayControllerInputItems items<span class="token punctuation">;</span>
  <span class="token comment">// We properly insert C at index 2</span>
  Items<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>_listOfModels count<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token punctuation">[</span>_listOfModels count<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Enqueue the changeset asynchronously in the datasource</span>
  <span class="token punctuation">[</span>_datasource enqueueChangeset<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> items<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></article><div class="margin-vert--lg"></div><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/componentkit/docs/datasource-changeset-api"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->Changeset API</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/componentkit/docs/datasource-dive-deeper"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Dive Deeper<!-- --> »</h4></a></div></nav></div><div class="col col--3 col--offset-1"><ul class="contents contents__left-border"><li><a href="#dont-forget-the-initial-section" class="contents__link">Don&#x27;t forget the initial section</a></li><li><a href="#lifecycle" class="contents__link">Lifecycle</a></li><li><a href="#the-datasource-involves-asynchronous-operations" class="contents__link">The datasource involves asynchronous operations</a></li></ul></div></div></div></div></div></div></div></div>
<script type="text/javascript" src="/componentkit/runtime~main.0a2eca2ec054c0400fc6.js"></script>
<script type="text/javascript" src="/componentkit/main.4b9bce3e656c811ec5d3.js"></script>
<script type="text/javascript" src="/componentkit/common.7ea2510f02a3ef427775.js"></script>
<script type="text/javascript" src="/componentkit/component---users-fabiomilano-documents-git-hub-componentkit-website-pages-index-js-05-c-a28.ee72d2da1191f00fd858.js"></script>
<script type="text/javascript" src="/componentkit/component---users-fabiomilano-documents-git-hub-componentkit-website-pages-support-jse-39-96d.f80afda51a61142eeb2f.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-actions-38-b-470.7bc764d3f18f4c82e7ef.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-advanced-views-3-b-8-088.a99f8b58022c5e6214eb.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-animation-41-c-028.d336666703b1107516a4.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-excessive-branching-569-20c.513365a4774af3bcec17.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-local-variablesfb-3-1ed.270a86ddc0ac874c8c17.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-overridesffc-ed5.a97f3ac07a1b2aeaad3b.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-push-backd-44-b09.9a795bf30a703a807109.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-single-use-constants-0-df-869.4e685b796a2d7e12fa95.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-avoid-width-100-percentf-3-e-0a8.eb3549bede8267adc9ce.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-break-out-composites-675-dea.f80adddbb1b9d41a1acd.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-check-for-nil-015-0d2.63ba19df68d6b030db57.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-component-api-81-e-a78.a726d2e9150ede080570.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-component-controllers-2-f-2-88b.fa4cf54cce1334b2c2ca.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-component-hosting-view-5-a-5-dd2.1a2680c3e91135a3fd20.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-components-cant-be-delegatesc-27-24e.b7b95be3db9a43d71ce3.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-composite-components-621-083.d281afdb33abe4dcac06.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-basics-8-a-5-0b9.39839ff17c2e671e6541.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-changeset-apic-91-766.10159b4f2736c6440058.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-dive-deeper-2-a-8-f3b.e32a48b48e41a0d804ac.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-gotchas-108-39f.0d934094cde48f5282d4.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-datasource-overview-1-e-0-99b.eefae232d3201330d018.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-debugging-4-cd-636.7cd14207da020e98e87e.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-fb-super-secret-6-a-8-2e2.2c864dd689d7dd4f1dce.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-getting-started-240-4d4.05e1312bce3205d79022.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-indentation-97-b-087.14f2468b9d0eedd21318.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-keep-controller-in-component-0-d-2-25e.28514be7aad03f507487.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-layoutf-7-a-ff1.6e92b0eb55c94fe9d0ec.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-lifecycle-methodseca-0be.8168b8fa882bbe25f9a4.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-never-subclass-components-5-dc-89d.a1cc6eddc718f787fa7b.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-no-side-effectsdfa-665.6335e71be575898ba03a.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-no-underscoresd-33-4f7.131a755465ca0d13c31a.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-pass-in-actions-074-baf.df6f7683a208bc44c25d.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-pass-in-immutable-objects-98-d-7fa.4a4c78752c84f5f822c4.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-philosophy-86-b-339.0b41254115f6e2e4819d.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-responder-chain-423-cfe.dfa8947ab513c65afc8a.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-scopes-14-d-211.7b551fa224550db7cf0c.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-state-881-c75.e22f16ad5c7ad83963e3.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-under-300-linesfcb-529.37f523eccf9249ababef.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-use-designated-initializer-style-7-c-3-c98.8a1eac948b291627da29.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-uses-4-b-4-19f.af65a0a2726632dcf23a.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-viewsf-64-b27.de9142744a053b0d45f1.js"></script>
<script type="text/javascript" src="/componentkit/content---componentkit-docs-why-cpp-4-de-fb5.d83d907f1dcd8ed1e1bc.js"></script>
<script type="text/javascript" src="/componentkit/vendors.9ea80749c2b35c6967e3.js"></script>
<script type="text/javascript" src="/componentkit/docsMetadata---componentkit-docsbec-70c.bc08fe525961777eaaee.js"></script>
<script type="text/javascript" src="/componentkit/metadata---componentkit-docs-datasource-gotchas-019-f9b.bcc33f1417292187d0a3.js"></script>
</body>
</html>